@use '../utils' as *;

// Define theme variables
:root,
[data-bs-theme="light"] {
  --sidebar-bg: var(--tblr-gray-200);
  --sidebar-border: var(--tblr-border-color);
  --sidebar-text: var(--tblr-body-color);
  --sidebar-muted: var(--tblr-secondary-color);
  --sidebar-hover-bg: var(--tblr-gray-200);
  --sidebar-active-bg: var(--ms-theme-primary);
  --sidebar-active-text: #ffffff;
  --sidebar-icon-color: var(--tblr-secondary-color);
  --sidebar-scrollbar-thumb: var(--tblr-gray-300);
  --dropdown-bg: var(--tblr-white);
  --dropdown-hover-bg: var(--tblr-gray-400);
  --dropdown-border: var(--tblr-border-color);
}

[data-bs-theme="dark"] {
  --sidebar-bg: var(--tblr-dark);
  --sidebar-border: var(--tblr-border-color);
  --sidebar-text: var(--tblr-body-color);
  --sidebar-muted: var(--tblr-secondary-color);
  --sidebar-hover-bg: var(--tblr-tertiary-bg);
  --sidebar-active-bg: var(--ms-theme-primary);
  --sidebar-active-text: #ffffff;
  --sidebar-icon-color: var(--tblr-secondary-color);
  --sidebar-scrollbar-thumb: var(--tblr-gray-700);
  --dropdown-bg: var(--tblr-dark);
  --dropdown-hover-bg: var(--tblr-tertiary-bg);
  --dropdown-border: var(--tblr-border-color);
}

.mojar_cms_sidebar {
  /* Sidebar Base */
  background-color: var(--sidebar-bg);
  border-right: 1px solid var(--sidebar-border);
  /* Subtle box-shadow for a more polished look */
  box-shadow: 2px 0 6px rgba(0, 0, 0, 0.05);
  /* Smooth transitions on color changes (light/dark modes) */
  transition: background-color 0.3s ease, border-color 0.3s ease;
  @media #{$common-medium-screen} {
  position: static !important;
    padding-top: 5px !important;
    overflow-y: auto !important;
    min-height: 100vh;
  }


  // Main navigation
  #sidebar-menu {
    /* Make sure scrolling also feels smoother */
    transition: all 0.3s ease;

    &::-webkit-scrollbar {
      width: 5px;
    }
    &::-webkit-scrollbar-track {
      background: transparent;
    }
    &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
    }

    .navbar-nav {
      margin: 0;
      padding: 0;

      .nav-item {
        /* Remove default list styling, ensure spacing */
        list-style: none;
        margin: 0;

        // Active parent item
        &.active {
          &:after {
            // border: none;
          }
        }

        // Example badge styling
        .badge {
          background-color: var(--badge-bg, #ff5b5b);
          color: var(--badge-color, #fff);
          font-size: 0.75rem;
          border-radius: 0.25rem;
          padding: 0.25rem 0.5rem;
          transition: background-color 0.3s ease, color 0.3s ease;
        }

        .nav-link {
          /* Flex alignment for icon + text */
          display: flex;
          align-items: center;
          padding: 0.5rem 1rem;
          border-radius: 0.25rem;
          color: var(--sidebar-text, #6c757d);
          text-decoration: none;
          /* Smooth color & background changes */
          transition: background-color 0.3s ease, color 0.3s ease;

          /* Hover state */
          &:hover {
            color: var(--sidebar-hover-text, #495057);
            background-color: var(--sidebar-hover-bg, rgba(255, 255, 255, 0.05));
          }

          /* Active link state */
          &.active {
            color: var(--sidebar-active-text, #212529);
            background-color: var(--sidebar-active-bg, rgba(255, 255, 255, 0.1));
          }

          &-icon {
            i {
              font-size: 1rem;
              /* Optional subtle icon animation on hover */
              transition: transform 0.3s ease;
            }
            // svg {
            //   color: var(--sidebar-active-text, #212529);
            // }
          }

          &-title {
            font-size: 0.875rem;
            font-weight: 400;
            transition: color 0.2s ease;
          }

          &.dropdown-toggle {
            /* Arrow styling (using :after or a built-in icon) */
            &:after {
              margin-left: auto;
              transform: rotate(0deg);
              transition: transform 0.3s ease;
            }
          }
        }

        // Dropdown menu
        .dropdown-menu {
          position: relative; /* Or absolute if you prefer */
          background-color: var(--sidebar-bg, #fff);
          // border: 1px solid var(--sidebar-border, #ddd);
          transition: all 0.3s ease;
          /* If you want it hidden until toggled, ensure display is handled by JavaScript or a class toggle */

          .dropdown-item {
            padding-left: 2.8rem;
            padding-right: 0.5rem;
            padding-bottom: 0.5rem;
            color: var(--sidebar-text, #6c757d);
            text-decoration: none;
            transition: background-color 0.3s ease, color 0.3s ease;
            border-radius: 0.25rem;
            &:hover {
              color: var(--sidebar-hover-text, #495057);
              background-color: var(--sidebar-hover-bg, rgba(255, 255, 255, 0.05));
            }

            &.active {
              color: var(--sidebar-active-text, #212529);
              background-color: var(--dropdown-hover-bg);
              border-radius: 0.25rem;
            }
          }
        }

        // Active submenu state
        &.mojar__menuLeft__submenu--toggled {
          > .nav-link {
            &.dropdown-toggle {
              /* Rotate arrow icon on submenu toggle */
              &:after {
                transform: rotate(90deg);
              }
            }
          }
          > .dropdown-menu {
            display: block;
          }
        }
      }
    }
  }
}
